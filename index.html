<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Atrapa la Moneda Mega Final</title>
<style>
body{
  margin:0;
  background:#0f0f0f;
  color:white;
  font-family:Arial;
  text-align:center;
  overflow:hidden;
}
h1{
  color:#ff00ff;
  text-shadow:0 0 15px #ff00ff, 0 0 30px #ff00ff;
}
button{
  padding:10px 20px;
  font-size:18px;
  background:#ff00ff;
  border:none;
  border-radius:10px;
  cursor:pointer;
  color:#fff;
  text-shadow:0 0 5px #fff;
}
#game, #adminPanel{ display:none; }
#moneda{
  font-size:80px;
  margin:20px;
  transition: transform 0.2s;
  position: relative;
  z-index: 2;
}
#moneda.anim{ transform: scale(1.5); }
.info{ font-size:20px; margin:10px; }

.fallingCoin, .diamond, .bossCoin{
  position:absolute;
  font-size:30px;
  top:-50px;
  animation-name:falling;
  animation-timing-function: linear;
  animation-duration: 3s;
}
.diamond{ color: #00ffff; font-size:25px; }
.bossCoin{ color: gold; font-size:35px; }

@keyframes falling {
  0%{ top:-50px; }
  100%{ top:100vh; }
}
</style>
</head>
<body>

<h1>üéÆ ATRAPA LA MONEDA MEGA FINAL</h1>

<div id="menu">
  <button onclick="iniciar()">INICIAR JUEGO</button>
  <button onclick="abrirAdmin()">ADMIN PANEL</button>
</div>

<div id="game">
  <h2 id="moneda">‚ùì</h2>
  <p>Presiona L, C o R o toca la moneda</p>
  <div class="info" id="stats"></div>
</div>

<div id="adminPanel">
  <h2>Admin Panel</h2>
  <button onclick="comandoParty()">Party üéâ</button>
  <button onclick="comandoClear()">Clear üßπ</button>
  <button onclick="comandoRainDiamonds()">Rain Diamonds üíé</button>
  <button onclick="comandoBoss()">Boss Event üëë</button>
  <button onclick="cerrarAdmin()">Cerrar Panel</button>
</div>

<audio id="coinSound" src="https://freesound.org/data/previews/341/341695_5260870-lq.mp3"></audio>
<audio id="bossSound" src="https://freesound.org/data/previews/331/331912_3248244-lq.mp3"></audio>

<script>
let pesos = 0;
let vidas = 5;
let record = localStorage.getItem("record") || 0;

let secuencia = ["R","L","C","L","R","C","R"];
let indice = 0;
let monedaActual = "";
let velocidad = 1500;
let intervalo;

const monedaEl = document.getElementById("moneda");
const statsEl = document.getElementById("stats");
const coinSound = document.getElementById("coinSound");
const bossSound = document.getElementById("bossSound");

function iniciar(){
  document.getElementById("menu").style.display="none";
  document.getElementById("game").style.display="block";
  resetGame();
}

function resetGame(){
  pesos = 0; vidas = 5; velocidad = 1500; indice = 0;
  actualizarStats();
  nuevaMoneda();
  clearInterval(intervalo);
  intervalo = setInterval(tiempoAgotado, velocidad);
}

function nuevaMoneda(){
  monedaActual = secuencia[indice];
  monedaEl.innerText = monedaActual;
  monedaEl.classList.add("anim");
  setTimeout(()=> monedaEl.classList.remove("anim"), 200);
  indice = (indice + 1) % secuencia.length;
}

function actualizarStats(){
  statsEl.innerText = "Pesos: " + pesos + " | Vidas: " + vidas + " | R√©cord: " + record;
}

function tiempoAgotado(){
  vidas--;
  actualizarStats();
  if(vidas <= 0) gameOver();
  nuevaMoneda();
}

function gameOver(){
  clearInterval(intervalo);
  if(pesos > record){
    record = pesos;
    localStorage.setItem("record", record);
  }
  alert("GAME OVER\nPuntaje: " + pesos);
  resetGame();
}

function atraparMoneda(){
  pesos++;
  coinSound.currentTime = 0;
  coinSound.play();
  velocidad = Math.max(500, velocidad - 50);
  clearInterval(intervalo);
  intervalo = setInterval(tiempoAgotado, velocidad);
  crearMonedaCayendo("üí∞");
}

// Teclado
document.addEventListener("keydown", function(e){
  const eleccion = e.key.toUpperCase();
  if(!["L","C","R"].includes(eleccion)) return;
  if(eleccion === monedaActual){ atraparMoneda(); }else{ vidas--; }
  actualizarStats();
  if(vidas <= 0) gameOver();
  nuevaMoneda();
});

// Celular
monedaEl.addEventListener("click", ()=>{
  atraparMoneda();
  nuevaMoneda();
});

// Animaci√≥n monedas cayendo
function crearMonedaCayendo(simbolo){
  const coin = document.createElement("div");
  coin.className = "fallingCoin";
  coin.innerText = simbolo;
  coin.style.left = Math.random() * 90 + "vw";
  coin.style.animationDuration = (2 + Math.random()*2) + "s";
  document.body.appendChild(coin);
  setTimeout(()=> coin.remove(), 3000);
}

// Admin Panel
function abrirAdmin(){ document.getElementById("adminPanel").style.display="block"; }
function cerrarAdmin(){ document.getElementById("adminPanel").style.display="none"; }

function comandoParty(){ for(let i=0;i<20;i++) crearMonedaCayendo("üí∞"); }
function comandoClear(){ document.querySelectorAll(".fallingCoin, .diamond, .bossCoin").forEach(el=> el.remove()); }
function comandoRainDiamonds(){
  for(let i=0;i<30;i++){
    const dia = document.createElement("div");
    dia.className="diamond";
    dia.innerText="üíé";
    dia.style.left=Math.random()*90+"vw";
    dia.style.animationDuration=(2+Math.random()*2)+"s";
    document.body.appendChild(dia);
    setTimeout(()=> dia.remove(), 3000);
  }
}

// Boss Event
function comandoBoss(){
  bossSound.currentTime=0;
  bossSound.play();
  for(let i=0;i<50;i++){
    const bossCoin = document.createElement("div");
    bossCoin.className="bossCoin";
    bossCoin.innerText="üëë";
    bossCoin.style.left = Math.random()*90 + "vw";
    bossCoin.style.animationDuration=(1.5 + Math.random()*2)+"s";
    document.body.appendChild(bossCoin);
    setTimeout(()=> bossCoin.remove(), 4000);
  }
}
</script>

</body>
</html>
