<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>隆Atrapa la Gaseosa Arcade - Mega Update Animada!</title>
<style>
  body {
    text-align: center;
    font-family: sans-serif;
    background: #222;
    color: #fff;
    overflow: hidden;
    position: relative;
    height: 100vh;
  }
  h1 { color: #ffdd00; }
  #puntaje { font-size: 20px; margin: 10px; }
  #mensaje { font-size: 18px; margin: 10px; min-height: 24px; }
  .moneda {
    font-size: 40px;
    position: absolute;
    cursor: pointer;
  }
  #adminPanel {
    position: fixed;
    top: 10px;
    right: 10px;
    background: #333;
    padding: 10px;
    border-radius: 8px;
    text-align: left;
    z-index: 1000;
  }
  #adminPanel button {
    margin: 3px 0;
    width: 100%;
    cursor: pointer;
  }
</style>
</head>
<body>

<h1>隆Atrapa la Gaseosa Arcade! イ</h1>
<p id="puntaje">Pesos: 0 | Vidas: 5</p>
<p id="mensaje">Haz clic en las monedas o presiona L, C o R</p>

<div id="adminPanel">
  <strong>Admin Panel</strong><br>
  <button onclick="rainMonedas()">Party</button>
  <button onclick="clearMonedas()">Clear</button>
  <button onclick="rainDiamonds()">Rain Diamonds</button>
</div>

<script>
let pesos = 0;
let vidas = 5;
const opciones = ['L', 'C', 'R'];
const puntajeEl = document.getElementById('puntaje');
const mensajeEl = document.getElementById('mensaje');

// Posiciones fijas para las monedas principales
const posicionesX = {
  L: window.innerWidth * 0.2,
  C: window.innerWidth * 0.5,
  R: window.innerWidth * 0.8
};

// Funci贸n para crear una moneda animada desde el cielo
function crearMoneda(pos, emoji=''){
  const mon = document.createElement('div');
  mon.className = 'moneda';
  mon.innerText = emoji;
  mon.style.left = posicionesX[pos] + 'px';
  mon.style.top = '-50px';
  document.body.appendChild(mon);

  const audio = new Audio('https://freesound.org/data/previews/331/331912_3248244-lq.mp3'); 
  audio.volume = 0.3;

  // Animaci贸n de ca铆da
  function caer(){
    let top = parseInt(mon.style.top);
    top += 5;
    mon.style.top = top + 'px';
    if(top < window.innerHeight-50) requestAnimationFrame(caer);
    else {
      mon.remove();
      vidas--;
      mensajeEl.innerText = `Fallaste, la moneda se perdi贸`;
      actualizarPuntaje();
    }
  }
  mon.addEventListener('click', ()=>{
    pesos++;
    mensajeEl.innerText = `隆Atrapaste la moneda!`;
    audio.play();
    mon.remove();
    actualizarPuntaje();
  });
  caer();
}

// Funci贸n para actualizar puntaje
function actualizarPuntaje(){
  puntajeEl.innerText = `Pesos: ${pesos} | Vidas: ${vidas}`;
  if(pesos >= 20){ 
    alert('隆Felicidades! Ganaste la gaseosa イ');
    pesos = 0; vidas = 5;
    actualizarPuntaje();
  }
  if(vidas <= 0){
    alert('Perdiste todas tus vidas ');
    pesos = 0; vidas = 5;
    actualizarPuntaje();
  }
}

// Funciones de admin
function rainMonedas(){
  for(let i=0;i<10;i++){
    setTimeout(()=>crearMoneda(opciones[Math.floor(Math.random()*3)],''), i*200);
  }
}

function clearMonedas(){
  document.querySelectorAll('.moneda').forEach(m=>m.remove());
  mensajeEl.innerText = 'Monedas limpiadas';
}

function rainDiamonds(){
  for(let i=0;i<10;i++){
    setTimeout(()=>crearMoneda(opciones[Math.floor(Math.random()*3)],''), i*300);
  }
}

// Teclas para atrapar monedas principales
document.addEventListener('keydown', function(e){
  const eleccion = e.key.toUpperCase();
  if(!opciones.includes(eleccion)) return;
  crearMoneda(eleccion);
});
</script>

</body>
</html>
