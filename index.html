<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Â¡Atrapa la moneda Arcade! - Update 3.0</title>
<style>
  body {
    text-align: center;
    font-family: sans-serif;
    background: #222;
    color: #fff;
  }
  h1 {
    color: #ffdd00;
  }
  #moneda {
    font-size: 50px;
    margin: 20px;
    display: inline-block;
    transition: transform 0.2s ease;
  }
  #mensaje, #puntaje, #guia {
    font-size: 18px;
    margin: 10px;
  }
  #boss {
    font-size: 40px;
    color: #ff5555;
    display: none;
    margin: 20px;
  }
  #menu {
    margin-top: 20px;
    background: #333;
    padding: 10px;
    border-radius: 10px;
    display: inline-block;
  }
  #menu label {
    margin-right: 10px;
  }
  select, input[type=checkbox] {
    margin-right: 20px;
  }
</style>
</head>
<body>

<h1>Â¡Atrapa la Gaseosa Arcade! ðŸ¥¤</h1>

<div id="puntaje">Pesos: 0 | Vidas: 5</div>
<div id="mensaje">Presiona L, C o R para atrapar la moneda</div>
<div id="guia">GuÃ­a: Sube de puntaje para enfrentar al Boss</div>
<div id="moneda">ðŸ’°</div>
<div id="boss">ðŸ‘¾</div>

<div id="menu">
  <label for="tema">Tema:</label>
  <select id="tema">
    <option value="#222,#fff">Normal</option>
    <option value="#004400,#aaffaa">Verde</option>
    <option value="#220044,#ddaaff">Morado</option>
  </select>
  <label><input type="checkbox" id="sonido" checked> Sonido</label>
</div>

<audio id="sonidoMoneda" src="https://www.soundjay.com/button/beep-07.wav"></audio>
<audio id="sonidoBoss" src="https://www.soundjay.com/button/button-16.mp3"></audio>

<script>
let pesos = 0;
let vidas = 5;
const opciones = ['L','C','R'];
let secuencia = ['R','L','C','L','R','C','R']; // Secuencia personalizada
let indiceSecuencia = 0;
let monedaEl = document.getElementById('moneda');
let mensajeEl = document.getElementById('mensaje');
let puntajeEl = document.getElementById('puntaje');
let bossEl = document.getElementById('boss');
let sonidoEl = document.getElementById('sonidoMoneda');
let sonidoBoss = document.getElementById('sonidoBoss');

function nuevaMoneda() {
  let pos = secuencia[indiceSecuencia];
  indiceSecuencia = (indiceSecuencia + 1) % secuencia.length;
  monedaEl.innerText = pos === 'L' ? 'ðŸ’° L' : pos === 'C' ? 'ðŸ’° C' : 'ðŸ’° R';
  monedaEl.style.transform = 'scale(1.5)';
  setTimeout(()=>{monedaEl.style.transform='scale(1)';}, 150);
  return pos;
}

let monedaActual = nuevaMoneda();

document.addEventListener('keydown', function(e){
  const eleccion = e.key.toUpperCase();
  if(!opciones.includes(eleccion)) return;

  if(eleccion === monedaActual){
    pesos++;
    mensajeEl.innerText = `Â¡Atrapaste la moneda en ${eleccion}!`;
    if(document.getElementById('sonido').checked) sonidoEl.play();
  } else {
    vidas--;
    mensajeEl.innerText = `Fallaste, la moneda estaba en ${monedaActual}`;
  }

  puntajeEl.innerText = `Pesos: ${pesos} | Vidas: ${vidas}`;

  // Boss Fight activaciÃ³n
  if(pesos === 5){
    bossEl.style.display = 'block';
    bossEl.innerText = 'ðŸ‘¾ Boss: Vida 3';
  }

  // Ataque Boss
  if(bossEl.style.display === 'block'){
    let vidaBoss = parseInt(bossEl.innerText.split(' ')[2]);
    if(eleccion === 'C'){ // atacar boss con C
      vidaBoss--;
      if(document.getElementById('sonido').checked) sonidoBoss.play();
      if(vidaBoss <= 0){
        bossEl.style.display = 'none';
        mensajeEl.innerText = 'Â¡Boss derrotado! ðŸŽ‰';
        pesos += 3;
      } else {
        bossEl.innerText = `ðŸ‘¾ Boss: Vida ${vidaBoss}`;
        mensajeEl.innerText = 'Â¡Golpeaste al Boss!';
      }
    }
  }

  if(pesos >= 7){
    alert('Â¡Felicidades! Ganaste tu gaseosa ðŸ¥¤');
    pesos = 0;
    vidas = 5;
    bossEl.style.display = 'none';
    indiceSecuencia = 0;
  } else if(vidas <= 0){
    alert('Perdiste todas tus vidas ðŸ˜¢');
    pesos = 0;
    vidas = 5;
    bossEl.style.display = 'none';
    indiceSecuencia = 0;
  }

  monedaActual = nuevaMoneda();
});

// MenÃº: cambio de tema
document.getElementById('tema').addEventListener('change', function(){
  let colores = this.value.split(',');
  document.body.style.background = colores[0];
  document.body.style.color = colores[1];
});
</script>

</body>
</html>
