<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Atrapa la Moneda Beta</title>
<style>
body{
  margin:0;
  background:#0f0f0f;
  color:white;
  font-family:Arial;
  text-align:center;
}
h1{
  color:#00ffcc;
  text-shadow:0 0 10px #00ffcc;
}
button{
  padding:10px 20px;
  font-size:18px;
  background:#00ffcc;
  border:none;
  border-radius:10px;
  cursor:pointer;
}
#game{ display:none; }
#moneda{
  font-size:80px;
  margin:20px;
  transition: transform 0.2s;
}
#moneda.anim{
  transform: scale(1.5);
}
.info{
  font-size:20px;
  margin:10px;
}
</style>
</head>
<body>

<h1>üéÆ ATRAPA LA MONEDA</h1>

<div id="menu">
  <button onclick="iniciar()">INICIAR JUEGO</button>
</div>

<div id="game">
  <h2 id="moneda">‚ùì</h2>
  <p>Presiona L, C o R</p>
  <div class="info" id="stats"></div>
</div>

<audio id="coinSound" src="https://freesound.org/data/previews/341/341695_5260870-lq.mp3"></audio>

<script>
let pesos = 0;
let vidas = 5;
let record = localStorage.getItem("record") || 0;

let secuencia = ["R","L","C","L","R","C","R"];
let indice = 0;

let monedaActual = "";
let velocidad = 1500;
let intervalo;

const monedaEl = document.getElementById("moneda");
const statsEl = document.getElementById("stats");
const coinSound = document.getElementById("coinSound");

function iniciar(){
  document.getElementById("menu").style.display="none";
  document.getElementById("game").style.display="block";
  resetGame();
}

function resetGame(){
  pesos = 0;
  vidas = 5;
  velocidad = 1500;
  indice = 0;
  actualizarStats();
  nuevaMoneda();
  clearInterval(intervalo);
  intervalo = setInterval(tiempoAgotado, velocidad);
}

function nuevaMoneda(){
  monedaActual = secuencia[indice];
  monedaEl.innerText = monedaActual;
  monedaEl.classList.add("anim");
  setTimeout(()=> monedaEl.classList.remove("anim"), 200);

  indice++;
  if(indice >= secuencia.length){
    indice = 0;
  }
}

function actualizarStats(){
  statsEl.innerText =
    "Pesos: " + pesos +
    " | Vidas: " + vidas +
    " | R√©cord: " + record;
}

function tiempoAgotado(){
  vidas--;
  actualizarStats();
  if(vidas <= 0){
    gameOver();
  }
  nuevaMoneda();
}

function gameOver(){
  clearInterval(intervalo);
  if(pesos > record){
    record = pesos;
    localStorage.setItem("record", record);
  }
  alert("GAME OVER\nPuntaje: " + pesos);
  resetGame();
}

function atraparMoneda(){
  pesos++;
  coinSound.currentTime = 0;
  coinSound.play();
  velocidad -= 50;
  if(velocidad < 500) velocidad = 500;
  clearInterval(intervalo);
  intervalo = setInterval(tiempoAgotado, velocidad);
}

document.addEventListener("keydown", function(e){
  const eleccion = e.key.toUpperCase();
  if(!["L","C","R"].includes(eleccion)) return;

  if(eleccion === monedaActual){
    atraparMoneda();
  }else{
    vidas--;
  }

  actualizarStats();
  if(vidas <= 0){
    gameOver();
  }

  nuevaMoneda();
});

// Para celular: toca la pantalla para simular la tecla correcta
monedaEl.addEventListener("click", ()=>{
  atraparMoneda();
  nuevaMoneda();
});
</script>

</body>
</html>
