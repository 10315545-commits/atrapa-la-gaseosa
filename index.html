<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Atrapa la Moneda - Chat Integrado</title>
<style>
body {
  margin:0;
  background:#0f0f0f;
  color:white;
  font-family:Arial;
  text-align:center;
}

h1 {
  color:#00ffcc;
  text-shadow:0 0 10px #00ffcc;
}

/* Juego */
#game {
  margin-top:20px;
}

/* Chat */
#chatContainer{
  position:fixed;
  bottom:10px;
  right:10px;
  width:260px;
  max-height:320px;
  background:rgba(0,0,0,0.7);
  border:2px solid #00ffcc;
  border-radius:10px;
  padding:5px;
  display:flex;
  flex-direction:column;
  z-index:1000;
}
#chatMessages{
  flex:1;
  overflow-y:auto;
  padding:5px;
  border-bottom:1px solid #00ffcc;
  margin-bottom:5px;
}
#chatInput{
  width:calc(100% - 60px);
  padding:5px;
  border:none;
  border-radius:5px;
  margin-right:5px;
}
#sendBtn{
  width:50px;
  background:#00ffcc;
  border:none;
  border-radius:5px;
  cursor:pointer;
  font-weight:bold;
}
.chatMsg{
  margin:2px 0;
}
.chatMsg.user{ color:#ffff66; }
.chatMsg.owner{ color:#ff88ff; font-weight:bold; }
</style>
</head>
<body>

<h1>ðŸŽ® ATRAPA LA MONEDA</h1>

<div id="game">
  <p>Â¡El juego sigue funcionando! Las monedas ya no tienen partÃ­culas.</p>
</div>

<!-- Chat -->
<div id="chatContainer">
  <div id="chatMessages"></div>
  <input type="text" id="chatInput" placeholder="Escribe un mensaje..." />
  <button id="sendBtn">Enviar</button>
</div>

<script>
// ---- Chat JS ----
let chatHistory=[]; 
const chatMessages=document.getElementById("chatMessages");
const chatInput=document.getElementById("chatInput");
const sendBtn=document.getElementById("sendBtn");

// Enviar mensaje usuario
function sendChat(){
  const msg=chatInput.value.trim();
  if(!msg) return;
  addMessage("user",msg);
  chatInput.value="";
}

// Enviar mensaje owner/admin
function ownerSend(msg){
  addMessage("owner",msg);
}

// Agregar mensaje al historial
function addMessage(from,text){
  if(chatHistory.length>=20) chatHistory.shift(); // Ãºltimos 20 mensajes
  chatHistory.push({from,text});
  updateChat();
}

// Actualizar el chat en pantalla
function updateChat(){
  chatMessages.innerHTML="";
  chatHistory.forEach(m=>{
    const div=document.createElement("div");
    div.className="chatMsg "+m.from;
    div.innerText=(m.from==="owner"?"Owner: ":"Jugador: ")+m.text;
    chatMessages.appendChild(div);
  });
  chatMessages.scrollTop=chatMessages.scrollHeight;
}

// Enviar al presionar Enter
chatInput.addEventListener("keydown",function(e){
  if(e.key==="Enter") sendChat();
});
sendBtn.addEventListener("click",sendChat);

// Ejemplo: enviar mensaje desde consola como owner
// ownerSend("Â¡Hola jugadores!");
</script>

</body>
</html>

